import{_ as y,o as n,c as d,a as e,F as T,f as F,g as G,t as b,u as B,h as J,p as j,d as z,i as s,j as k,k as D,v as S,l as N,e as K,m as O,n as P,q as I,b as H}from"./index.87c65a72.js";const Q={},R={class:"content"};function W(a,f,r,v,u,_){return n(),d("div",R,[e("button",{class:"btn",onClick:f[0]||(f[0]=t=>a.$emit("openAddShareData",""))},"Add Share Data")])}var X=y(Q,[["render",W],["__scopeId","data-v-b0f5c8d0"]]);const q=a=>(j("data-v-69030a8e"),a=a(),z(),a),Z={class:"share-data-list"},ee=["onContextmenu"],te={class:"cover"},ae=["src"],oe={class:"content"},ne={class:"title"},le={class:"date"},se=q(()=>e("summary",null,"Note",-1)),ie={class:"down-link"},de=q(()=>e("summary",null,"Download Link",-1)),re={class:"down-list"},ue=["href"],ce={__name:"ShareDataList",props:{shareDataList:Array},setup(a,{emit:f}){const r=a;function v(u){f("openContextMenu",u)}return(u,_)=>(n(),d("div",Z,[(n(!0),d(T,null,F(r.shareDataList,t=>(n(),d("div",{key:t.id,onContextmenu:G(l=>v(t),["prevent"]),class:"list-item"},[e("div",te,[e("img",{src:t.cover_url===""?"novel.jpg":t.cover_url,alt:""},null,8,ae)]),e("div",oe,[e("div",ne,b(t.title),1),e("div",le,"Date: "+b(B(J).parseDate(t.date)),1),e("details",null,[se,e("p",null,b(t.note),1)]),e("details",ie,[de,e("div",re,[(n(!0),d(T,null,F(t.file_url,l=>(n(),d("div",{key:l.title,class:"down-list-item"},[e("a",{href:l.link,target:"_blank",rel:"noopener noreferrer"},b(l.title),9,ue)]))),128))])])])],40,ee))),128))]))}};var ve=y(ce,[["__scopeId","data-v-69030a8e"]]);const M=a=>(j("data-v-76ce6822"),a=a(),z(),a),_e={class:"fixed"},pe={class:"content-center"},he=M(()=>e("div",{class:"header"},"Add Share Data",-1)),me={key:0,class:"message red"},fe={class:"t-form"},xe={class:"form-group"},be=M(()=>e("label",null,"Title",-1)),ge={class:"form-group"},ke=M(()=>e("label",null,"Cover Url",-1)),$e={class:"form-group"},De=M(()=>e("label",null,"Note",-1)),Se={key:1},we={class:"message red"},ye={class:"form-group"},Ce={class:"d-link"},Le=M(()=>e("div",{class:"header"},"Download Link",-1)),Ue=["onClick"],Ae={class:"btn-group"},Me={__name:"AddShareData",setup(a,{emit:f}){const r=s(""),v=s(""),u=s(""),_=s(""),t=s([]),l=s(!1),p=s(""),x=s(""),g=s("");function C(){l.value=!0}function w(){l.value=!1}function L(){p.value!==""&&x!==""?(t.value.push({title:x.value,link:p.value}),p.value="",x.value=""):g.value="please fill title and link"}function U(i){t.value=t.value.filter(o=>o.title!==i)}function A(){if(v.value===""){r.value="please fill title field";return}const i={title:v.value,cover_url:_.value,note:u.value,file_url:t.value};N.post("/api/v2/sharedata",i,{headers:{"Content-Type":"application/json"}}).then(o=>{console.log(o.data),f("close",o.data.shareData)}).catch(o=>{console.log(o.response)})}return(i,o)=>(n(),d("div",_e,[e("div",pe,[he,r.value!==""?(n(),d("div",me,b(r.value),1)):k("",!0),e("div",fe,[e("div",xe,[be,D(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":o[0]||(o[0]=h=>v.value=h)},null,512),[[S,v.value]])]),e("div",ge,[ke,D(e("input",{type:"text",placeholder:"Cover Url","onUpdate:modelValue":o[1]||(o[1]=h=>_.value=h)},null,512),[[S,_.value]])]),e("div",$e,[De,D(e("textarea",{placeholder:"Note","onUpdate:modelValue":o[2]||(o[2]=h=>u.value=h)},null,512),[[S,u.value]])]),l.value?k("",!0):(n(),d("button",{key:0,onClick:C,class:"btn"},"Show Download Form")),l.value?(n(),d("div",Se,[e("div",we,b(g.value),1),e("div",ye,[D(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":o[3]||(o[3]=h=>x.value=h)},null,512),[[S,x.value]]),D(e("input",{type:"text",placeholder:"Download Link","onUpdate:modelValue":o[4]||(o[4]=h=>p.value=h)},null,512),[[S,p.value]])]),e("button",{onClick:L,class:"btn add-btn"},"Add"),e("button",{onClick:w,class:"btn"},"Hide")])):k("",!0),e("div",Ce,[Le,(n(!0),d(T,null,F(t.value,h=>(n(),d("div",{key:h,class:"link-item"},[K(b(h.title)+" ",1),e("span",{onClick:$=>U(h.title),class:"del"},"x",8,Ue)]))),128))])]),e("div",Ae,[e("button",{class:"btn bg-red",onClick:o[5]||(o[5]=h=>i.$emit("close",null))},"Cancel"),e("button",{class:"btn",onClick:A},"Add")])])]))}};var Ve=y(Me,[["__scopeId","data-v-76ce6822"]]);const V=a=>(j("data-v-0d3bace4"),a=a(),z(),a),Ie={class:"fixed"},Te={class:"content-center"},Fe=V(()=>e("div",{class:"header"},"Update Share Data",-1)),Ne={key:0,class:"message red"},je={class:"t-form"},ze={class:"form-group"},Be=V(()=>e("label",null,"Title",-1)),Oe={class:"form-group"},He=V(()=>e("label",null,"Cover Url",-1)),qe={class:"form-group"},Ee=V(()=>e("label",null,"Note",-1)),Ye={key:1},Ge={class:"message red"},Je={class:"form-group"},Ke={class:"d-link"},Pe=V(()=>e("div",{class:"header"},"Download Link",-1)),Qe=["onClick"],Re=["onClick"],We={class:"btn-group"},Xe={__name:"UpdateShareData",props:{share:Object},setup(a,{emit:f}){const r=a,v=s(""),u=s(""),_=s(""),t=s(""),l=s([]),p=s(!1),x=s(""),g=s(""),C=s(""),w=s(!1);O(()=>{u.value=r.share.title,_.value=r.share.note,l.value=r.share.file_url,t.value=r.share.cover_url});function L(){p.value=!0}function U(){p.value=!1}function A($){g.value=$.title,x.value=$.link,o($.title),w.value=!0,p.value=!0}function i(){w.value=!1,p.value=!1,x.value!==""&&g!==""?(l.value.push({title:g.value,link:x.value}),x.value="",g.value=""):C.value="please fill title and link"}function o($){l.value=l.value.filter(c=>c.title!==$)}function h(){let $={title:u.value,cover_url:t.value,note:_.value,file_url:l.value,date:Date.now()};N.put(`/api/v2/sharedata/${r.share.id}`,$,{headers:{"Content-Type":"application/json"}}).then(c=>{console.log(c.data),f("updateShare",null)}).catch(c=>{console.log(c.response)})}return($,c)=>(n(),d("div",Ie,[e("div",Te,[Fe,v.value!==""?(n(),d("div",Ne,b(v.value),1)):k("",!0),e("div",je,[e("div",ze,[Be,D(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":c[0]||(c[0]=m=>u.value=m)},null,512),[[S,u.value]])]),e("div",Oe,[He,D(e("input",{type:"text",placeholder:"Cover Url","onUpdate:modelValue":c[1]||(c[1]=m=>t.value=m)},null,512),[[S,t.value]])]),e("div",qe,[Ee,D(e("textarea",{placeholder:"Note","onUpdate:modelValue":c[2]||(c[2]=m=>_.value=m)},null,512),[[S,_.value]])]),p.value?k("",!0):(n(),d("button",{key:0,onClick:L,class:"btn"}," Show Download Form ")),p.value?(n(),d("div",Ye,[e("div",Ge,b(C.value),1),e("div",Je,[D(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":c[3]||(c[3]=m=>g.value=m)},null,512),[[S,g.value]]),D(e("input",{type:"text",placeholder:"Download Link","onUpdate:modelValue":c[4]||(c[4]=m=>x.value=m)},null,512),[[S,x.value]])]),e("button",{onClick:i,class:"btn add-btn"},b(w.value?"Update":"Add"),1),e("button",{onClick:U,class:"btn"},"Hide")])):k("",!0),e("div",Ke,[Pe,(n(!0),d(T,null,F(l.value,m=>(n(),d("div",{key:m,class:"link-item"},[e("div",{onClick:Y=>A(m),class:"link-title"},b(m.title),9,Qe),e("span",{onClick:Y=>o(m.title),class:"del"},"x",8,Re)]))),128))])]),e("div",We,[e("button",{class:"btn bg-red",onClick:c[5]||(c[5]=m=>$.$emit("close",null))},"Cancel"),e("button",{class:"btn",onClick:h},"Update")])])]))}};var Ze=y(Xe,[["__scopeId","data-v-0d3bace4"]]);const E=a=>(j("data-v-9384c5b8"),a=a(),z(),a),et={key:0,class:"content-center"},tt={class:"header"},at=E(()=>e("div",{class:"message"},"Are You Sure?",-1)),ot={class:"btn-group"},nt={class:"content-bottom"},lt={class:"header"},st={class:"list"},it=E(()=>e("div",{class:"list-item"},"Info",-1)),dt={__name:"ContextMenu",props:{share:Object},setup(a,{emit:f}){const r=s(!1);function v(t){t.target.className==="context-menu fixed"&&f("close")}function u(){r.value=!0}function _(){r.value=!1}return(t,l)=>(n(),d("div",{class:"context-menu fixed",onClick:v},[r.value?(n(),d("div",et,[e("div",tt,b(a.share.title),1),at,e("div",ot,[e("button",{onClick:_,class:"btn"},"Cancel"),e("button",{onClick:l[0]||(l[0]=p=>t.$emit("deleteShare",a.share)),class:"btn bg-red"},"Delete")])])):k("",!0),e("div",nt,[e("div",lt,b(a.share.title),1),e("div",st,[it,e("div",{onClick:l[1]||(l[1]=p=>t.$emit("updateShare",a.share)),class:"list-item"},"Update"),e("div",{onClick:u,class:"list-item red-text"},"Delete")])])]))}};var rt=y(dt,[["__scopeId","data-v-9384c5b8"]]);const ut={class:"sharedata-component"},ct={__name:"index",setup(a){const f=P(),r=s(!1),v=s(!1),u=s(!1),_=s([]),t=s({});O(()=>{l()});function l(){N.get("/api/v2/sharedata").then(i=>{console.log(i.data.shareDataFiles),_.value=i.data.shareDataFiles}).catch(i=>{console.log(i.response)})}function p(i){N.delete(`/api/v2/sharedata?search=id,${i.id}`).then(o=>{u.value=!1,l()}).catch(o=>{console.log(o.response)})}function x(){u.value=!1,v.value=!1,l()}function g(){r.value=!0}function C(i=null){i!==void 0&&i!==""&&i!==null&&_.value.unshift(i),r.value=!1}function w(){v.value=!1}function L(i){v.value=!0,u.value=!1,t.value=i}function U(i){f.isLogin&&(u.value=!0,t.value=i)}function A(){u.value=!1}return(i,o)=>(n(),d("div",ut,[r.value?(n(),I(Ve,{key:0,onClose:C})):k("",!0),v.value?(n(),I(Ze,{key:1,share:t.value,onUpdateShare:x,onClose:w},null,8,["share"])):k("",!0),u.value?(n(),I(rt,{key:2,share:t.value,onClose:A,onDeleteShare:p,onUpdateShare:L},null,8,["share"])):k("",!0),H(ve,{shareDataList:_.value,onOpenContextMenu:U},null,8,["shareDataList"]),B(f).isLogin?(n(),I(X,{key:3,onOpenAddShareData:g})):k("",!0)]))}};var vt=y(ct,[["__scopeId","data-v-542599de"]]);const _t={class:"share-data"},pt={__name:"ShareData",setup(a){return(f,r)=>(n(),d("div",_t,[H(vt)]))}};var mt=y(pt,[["__scopeId","data-v-42b46fc5"]]);export{mt as default};
