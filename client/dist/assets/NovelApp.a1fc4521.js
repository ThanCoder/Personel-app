import{_ as k,o as i,c,a as e,t as f,p as N,d as S,u as V,F as L,f as q,m as D,h as l,i as h,j as g,v as x,e as w,k as j,l as I,b as T,n as F}from"./index.49611be7.js";const B=d=>(N("data-v-86b5ef20"),d=d(),S(),d),O={class:"app-detail"},H={class:"cover"},z=["src"],E={class:"content"},R={class:"title"},G={class:"user"},J={class:"version"},K={class:"version"},P={class:"url"},Q=["href"],W=B(()=>e("summary",null,"Release Note",-1)),X={__name:"AppDetail",props:{app:Object},setup(d){const o=d;return(s,v)=>(i(),c("div",O,[e("div",H,[e("img",{src:o.app.cover_url!==""?o.app.cover_url:"https://i.postimg.cc/jScrHrjN/novel-icon.jpg",alt:"cover"},null,8,z)]),e("div",E,[e("div",R,f(o.app.title),1),e("div",G,"User: "+f(o.app.user),1),e("div",J,"Version: "+f(o.app.version_code),1),e("div",K,"Date: "+f(o.app.date),1),e("div",P,[e("a",{href:o.app.file_url,target:"__blank"},"Download",8,Q)]),e("details",null,[W,e("p",null,f(o.app.note),1)])])]))}};var Y=k(X,[["__scopeId","data-v-86b5ef20"]]);const Z={class:"app-list"},ee={__name:"AppList",props:{apps:Array},setup(d,{emit:o}){const s=d,v=V();function r(n,u){v.isLogin&&(u.preventDefault(),o("openContextMenu",n))}return(n,u)=>(i(),c("div",Z,[(i(!0),c(L,null,q(s.apps,_=>(i(),D(Y,{key:_.id,app:_,onContextmenu:m=>r(_,m)},null,8,["app","onContextmenu"]))),128))]))}};var te=k(ee,[["__scopeId","data-v-5944f2fa"]]);const oe={class:"content"},se={__name:"Content",setup(d){return(o,s)=>(i(),c("div",oe,[e("button",{onClick:s[0]||(s[0]=v=>o.$emit("showAddDialog","")),class:"btn"},"Add App")]))}};var ae=k(se,[["__scopeId","data-v-5d169e35"]]);const M=d=>(N("data-v-a639eafa"),d=d(),S(),d),le={class:"add-app-dialog fixed"},ne={class:"content-center"},pe=M(()=>e("div",{class:"header"},"Add Novel App",-1)),ie={key:0,class:"message red"},de={class:"t-form"},re={class:"form-group"},ue=w("Title "),ce={key:0,class:"msg"},ve={class:"form-group"},_e=w("Version Code "),fe={key:0,class:"msg"},me={class:"form-group"},he=w("File Url "),ge={key:0,class:"msg"},xe={class:"form-group"},be=M(()=>e("label",null,"Cover Url",-1)),$e={class:"form-group"},Ae=M(()=>e("label",null,"Note",-1)),ye={class:"btn-group"},Ce={__name:"AddAppDialog",setup(d,{emit:o}){const s=l(""),v=l(0),r=l(""),n=l("https://i.postimg.cc/jScrHrjN/novel-icon.jpg"),u=l(""),_=l(""),m=l(""),b=l(""),$=l(""),A=V();function y(){if(s.value===""){_.value="title is required";return}if(v.value===0)return m.value="version code is required",!1;if(r.value===""){b.value="file url is required";return}let C={title:s.value,version_code:v.value,file_url:r.value,cover_url:n.value,note:u.value};j.post("/api/v2/novel-app",C,{headers:{"Content-Type":"application/json",token:A.token}}).then(a=>{console.log(a.data),o("close","")}).catch(a=>{console.log(a.response),a.response.data.error&&($.value=a.response.data.error)})}return(C,a)=>(i(),c("div",le,[e("div",ne,[pe,$.value!==""?(i(),c("div",ie,f($.value),1)):h("",!0),e("form",de,[e("div",re,[e("label",null,[ue,_.value!==""?(i(),c("div",ce,f(_.value),1)):h("",!0)]),g(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":a[0]||(a[0]=t=>s.value=t)},null,512),[[x,s.value]])]),e("div",ve,[e("label",null,[_e,m.value!==""?(i(),c("div",fe,f(m.value),1)):h("",!0)]),g(e("input",{type:"number",placeholder:"Version Code","onUpdate:modelValue":a[1]||(a[1]=t=>v.value=t)},null,512),[[x,v.value]])]),e("div",me,[e("label",null,[he,b.value!==""?(i(),c("div",ge,f(b.value),1)):h("",!0)]),g(e("input",{type:"text",placeholder:"File Url","onUpdate:modelValue":a[2]||(a[2]=t=>r.value=t)},null,512),[[x,r.value]])]),e("div",xe,[be,g(e("input",{type:"text",placeholder:"Cover Url","onUpdate:modelValue":a[3]||(a[3]=t=>n.value=t)},null,512),[[x,n.value]])]),e("div",$e,[Ae,g(e("textarea",{placeholder:"Note","onUpdate:modelValue":a[4]||(a[4]=t=>u.value=t)},null,512),[[x,u.value]])])]),e("div",ye,[e("button",{class:"btn bg-red",onClick:a[5]||(a[5]=t=>C.$emit("close"))},"Cancel"),e("button",{class:"btn",onClick:y},"Add")])])]))}};var Ue=k(Ce,[["__scopeId","data-v-a639eafa"]]);const ke={class:"update-app fixed"},we={class:"content-center"},De={class:"header"},je={key:0,class:"message red"},Ve={class:"t-form"},Me={class:"form-group"},Ne=w("Title "),Se={key:0,class:"msg"},Ie={class:"form-group"},Te=w("Version Code "),Le={key:0,class:"msg"},qe={class:"form-group"},Fe=w("File Url "),Be={key:0,class:"msg"},Oe={class:"form-group"},He=e("label",null,"Cover Url",-1),ze={class:"form-group"},Ee=e("label",null,"Note",-1),Re={class:"btn-group"},Ge={__name:"UpdateApp",props:{app:Object},setup(d,{emit:o}){const s=d,v=V(),r=l(""),n=l(0),u=l(""),_=l("https://i.postimg.cc/jScrHrjN/novel-icon.jpg"),m=l(""),b=l(""),$=l(""),A=l(""),y=l("");I(()=>{s.app&&(r.value=s.app.title,n.value=s.app.version_code,u.value=s.app.file_url,m.value=s.app.note)});function C(){if(r.value===""){b.value="title is required";return}if(n.value===0)return $.value="version code is required",!1;if(u.value===""){A.value="file url is required";return}let a={title:r.value,version_code:n.value,file_url:u.value,cover_url:_.value,note:m.value};j.put(`/api/v2/novel-app/${s.app.id}`,a,{headers:{"Content-Type":"application/json",token:v.token}}).then(t=>{console.log(t.data),o("close","")}).catch(t=>{console.log(t.response),t.response.data.error&&(y.value=t.response.data.error)})}return(a,t)=>(i(),c("div",ke,[e("div",we,[e("div",De,f(s.app.title?s.app.title:"Update App"),1),y.value!==""?(i(),c("div",je,f(y.value),1)):h("",!0),e("form",Ve,[e("div",Me,[e("label",null,[Ne,b.value!==""?(i(),c("div",Se,f(b.value),1)):h("",!0)]),g(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[0]||(t[0]=p=>r.value=p)},null,512),[[x,r.value]])]),e("div",Ie,[e("label",null,[Te,$.value!==""?(i(),c("div",Le,f($.value),1)):h("",!0)]),g(e("input",{type:"number",placeholder:"Version Code","onUpdate:modelValue":t[1]||(t[1]=p=>n.value=p)},null,512),[[x,n.value]])]),e("div",qe,[e("label",null,[Fe,A.value!==""?(i(),c("div",Be,f(A.value),1)):h("",!0)]),g(e("input",{type:"text",placeholder:"File Url","onUpdate:modelValue":t[2]||(t[2]=p=>u.value=p)},null,512),[[x,u.value]])]),e("div",Oe,[He,g(e("input",{type:"text",placeholder:"Cover Url","onUpdate:modelValue":t[3]||(t[3]=p=>_.value=p)},null,512),[[x,_.value]])]),e("div",ze,[Ee,g(e("textarea",{placeholder:"Note","onUpdate:modelValue":t[4]||(t[4]=p=>m.value=p)},null,512),[[x,m.value]])])]),e("div",Re,[e("button",{class:"btn bg-red",onClick:t[5]||(t[5]=p=>a.$emit("close"))},"Cancel"),e("button",{class:"btn",onClick:C},"Update")])])]))}};const Je={class:"content"},Ke={class:"header"},Pe={class:"list"},Qe={__name:"AppContextMenu",props:{app:Object},setup(d,{emit:o}){const s=d;function v(n){n.target.className==="app-context-menu fixed"&&o("close","")}function r(){o("close",""),o("deleteApp",s.app.id)}return(n,u)=>(i(),c("div",{class:"app-context-menu fixed",onClick:v},[e("div",Je,[e("div",Ke,f(s.app.title),1),e("div",Pe,[e("div",{class:"list-item",onClick:u[0]||(u[0]=_=>n.$emit("updateApp"))},"Update"),e("div",{class:"list-item red",onClick:r},"Delete")])])]))}};var We=k(Qe,[["__scopeId","data-v-9388b9f2"]]);const Xe={class:"novel-app-component"},Ye={__name:"index",setup(d){const o=l([]),s=l({}),v=l(!1),r=l(!1),n=l(!1),u=V();function _(){j.get("/api/v2/novel-app").then(p=>{o.value=p.data.apps}).catch(p=>{console.log(p.response)})}function m(){v.value=!0}function b(){v.value=!1,o.value=[],_()}function $(){r.value=!0,n.value=!1,o.value=[],_()}function A(){r.value=!1,n.value=!1}function y(p){s.value=p,n.value=!0}function C(){s.value={},n.value=!1}function a(p){o.value=o.value.filter(U=>U.id!==p)}function t(p){j.delete(`/api/v2/novel-app/${p}`).then(U=>{console.log(U),a(p)}).catch(U=>{console.log(U.response)})}return I(()=>{_()}),(p,U)=>(i(),c("div",Xe,[v.value?(i(),D(Ue,{key:0,onClose:b})):h("",!0),n.value?(i(),D(We,{key:1,app:s.value,onClose:C,onDeleteApp:t,onUpdateApp:$},null,8,["app"])):h("",!0),r.value?(i(),D(Ge,{key:2,app:s.value,onClose:A},null,8,["app"])):h("",!0),T(te,{apps:o.value,onOpenContextMenu:y},null,8,["apps"]),F(u).isLogin?(i(),D(ae,{key:3,onShowAddDialog:m})):h("",!0)]))}};var Ze=k(Ye,[["__scopeId","data-v-4461555e"]]);const et={class:"novel-app"},ot={__name:"NovelApp",setup(d){return(o,s)=>(i(),c("div",et,[T(Ze)]))}};export{ot as default};
