import{_ as D,o as n,c as r,a as e,F as V,f as I,g as q,t as x,u as j,h as E,p as F,d as N,i as d,j as b,k,v as $,l as T,e as z,m as B,n as Y,q as M,b as O}from"./index.ffc62486.js";const G={},J={class:"content"};function K(o,h,u,v,c,_){return n(),r("div",J,[e("button",{class:"btn",onClick:h[0]||(h[0]=a=>o.$emit("openAddShareData",""))},"Add Share Data")])}var P=D(G,[["render",K],["__scopeId","data-v-b0f5c8d0"]]);const Q=o=>(F("data-v-09822ffb"),o=o(),N(),o),R={class:"share-data-list"},W=["onContextmenu"],X={class:"cover"},Z=["src"],ee={class:"content"},te={class:"title"},ae={class:"date"},oe={class:"note"},se={class:"down-link"},ne=Q(()=>e("summary",null,"Download Link",-1)),le={class:"down-list"},ie=["href"],de={__name:"ShareDataList",props:{shareDataList:Array},setup(o,{emit:h}){const u=o;function v(c){h("openContextMenu",c)}return(c,_)=>(n(),r("div",R,[(n(!0),r(V,null,I(u.shareDataList,a=>(n(),r("div",{key:a.id,onContextmenu:q(l=>v(a),["prevent"]),class:"list-item"},[e("div",X,[e("img",{src:a.cover_url===""?"novel.jpg":a.cover_url,alt:""},null,8,Z)]),e("div",ee,[e("div",te,x(a.title),1),e("div",ae,"Date: "+x(j(E).parseDate(a.date)),1),e("div",oe,"Note: "+x(a.note),1),e("details",se,[ne,e("div",le,[(n(!0),r(V,null,I(a.file_url,l=>(n(),r("div",{key:l.title,class:"down-list-item"},[e("a",{href:l.link,target:"_blank",rel:"noopener noreferrer"},x(l.title),9,ie)]))),128))])])])],40,W))),128))]))}};var re=D(de,[["__scopeId","data-v-09822ffb"]]);const U=o=>(F("data-v-76ce6822"),o=o(),N(),o),ue={class:"fixed"},ce={class:"content-center"},ve=U(()=>e("div",{class:"header"},"Add Share Data",-1)),_e={key:0,class:"message red"},pe={class:"t-form"},he={class:"form-group"},fe=U(()=>e("label",null,"Title",-1)),me={class:"form-group"},xe=U(()=>e("label",null,"Cover Url",-1)),be={class:"form-group"},ge=U(()=>e("label",null,"Note",-1)),ke={key:1},$e={class:"message red"},De={class:"form-group"},Se={class:"d-link"},we=U(()=>e("div",{class:"header"},"Download Link",-1)),ye=["onClick"],Ce={class:"btn-group"},Le={__name:"AddShareData",setup(o,{emit:h}){const u=d(""),v=d(""),c=d(""),_=d(""),a=d([]),l=d(!1),f=d(""),m=d(""),g=d("");function S(){l.value=!0}function w(){l.value=!1}function y(){f.value!==""&&m!==""?(a.value.push({title:m.value,link:f.value}),f.value="",m.value=""):g.value="please fill title and link"}function C(i){a.value=a.value.filter(s=>s.title!==i)}function L(){if(v.value===""){u.value="please fill title field";return}const i={title:v.value,cover_url:_.value,note:c.value,file_url:a.value};T.post("/api/v2/sharedata",i,{headers:{"Content-Type":"application/json"}}).then(s=>{console.log(s.data),h("close",s.data.shareData)}).catch(s=>{console.log(s.response)})}return(i,s)=>(n(),r("div",ue,[e("div",ce,[ve,u.value!==""?(n(),r("div",_e,x(u.value),1)):b("",!0),e("div",pe,[e("div",he,[fe,k(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":s[0]||(s[0]=t=>v.value=t)},null,512),[[$,v.value]])]),e("div",me,[xe,k(e("input",{type:"text",placeholder:"Cover Url","onUpdate:modelValue":s[1]||(s[1]=t=>_.value=t)},null,512),[[$,_.value]])]),e("div",be,[ge,k(e("textarea",{placeholder:"Note","onUpdate:modelValue":s[2]||(s[2]=t=>c.value=t)},null,512),[[$,c.value]])]),l.value?b("",!0):(n(),r("button",{key:0,onClick:S,class:"btn"},"Show Download Form")),l.value?(n(),r("div",ke,[e("div",$e,x(g.value),1),e("div",De,[k(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":s[3]||(s[3]=t=>m.value=t)},null,512),[[$,m.value]]),k(e("input",{type:"text",placeholder:"Download Link","onUpdate:modelValue":s[4]||(s[4]=t=>f.value=t)},null,512),[[$,f.value]])]),e("button",{onClick:y,class:"btn add-btn"},"Add"),e("button",{onClick:w,class:"btn"},"Hide")])):b("",!0),e("div",Se,[we,(n(!0),r(V,null,I(a.value,t=>(n(),r("div",{key:t,class:"link-item"},[z(x(t.title)+" ",1),e("span",{onClick:p=>C(t.title),class:"del"},"x",8,ye)]))),128))])]),e("div",Ce,[e("button",{class:"btn bg-red",onClick:s[5]||(s[5]=t=>i.$emit("close",null))},"Cancel"),e("button",{class:"btn",onClick:L},"Add")])])]))}};var Ue=D(Le,[["__scopeId","data-v-76ce6822"]]);const A=o=>(F("data-v-37e2d00a"),o=o(),N(),o),Ae={class:"fixed"},Me={class:"content-center"},Ve=A(()=>e("div",{class:"header"},"Update Share Data",-1)),Ie={key:0,class:"message red"},Te={class:"t-form"},Fe={class:"form-group"},Ne=A(()=>e("label",null,"Title",-1)),je={class:"form-group"},ze=A(()=>e("label",null,"Cover Url",-1)),Be={class:"form-group"},Oe=A(()=>e("label",null,"Note",-1)),He={key:1},qe={class:"message red"},Ee={class:"form-group"},Ye={class:"d-link"},Ge=A(()=>e("div",{class:"header"},"Download Link",-1)),Je=["onClick"],Ke={class:"file_url"},Pe={class:"btn-group"},Qe={__name:"UpdateShareData",props:{share:Object},setup(o,{emit:h}){const u=o,v=d(""),c=d(""),_=d(""),a=d(""),l=d([]),f=d(!1),m=d(""),g=d(""),S=d("");B(()=>{c.value=u.share.title,_.value=u.share.note,l.value=u.share.file_url,a.value=u.share.cover_url});function w(){f.value=!0}function y(){f.value=!1}function C(){m.value!==""&&g!==""?(l.value.push({title:g.value,link:m.value}),m.value="",g.value=""):S.value="please fill title and link"}function L(s){l.value=l.value.filter(t=>t.title!==s)}function i(){let s={title:c.value,cover_url:a.value,note:_.value,file_url:l.value,date:Date.now()};T.put(`/api/v2/sharedata/${u.share.id}`,s,{headers:{"Content-Type":"application/json"}}).then(t=>{console.log(t.data),h("updateShare",null)}).catch(t=>{console.log(t.response)})}return(s,t)=>(n(),r("div",Ae,[e("div",Me,[Ve,v.value!==""?(n(),r("div",Ie,x(v.value),1)):b("",!0),e("div",Te,[e("div",Fe,[Ne,k(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[0]||(t[0]=p=>c.value=p)},null,512),[[$,c.value]])]),e("div",je,[ze,k(e("input",{type:"text",placeholder:"Cover Url","onUpdate:modelValue":t[1]||(t[1]=p=>a.value=p)},null,512),[[$,a.value]])]),e("div",Be,[Oe,k(e("textarea",{placeholder:"Note","onUpdate:modelValue":t[2]||(t[2]=p=>_.value=p)},null,512),[[$,_.value]])]),f.value?b("",!0):(n(),r("button",{key:0,onClick:w,class:"btn"},"Show Download Form")),f.value?(n(),r("div",He,[e("div",qe,x(S.value),1),e("div",Ee,[k(e("input",{type:"text",placeholder:"Title","onUpdate:modelValue":t[3]||(t[3]=p=>g.value=p)},null,512),[[$,g.value]]),k(e("input",{type:"text",placeholder:"Download Link","onUpdate:modelValue":t[4]||(t[4]=p=>m.value=p)},null,512),[[$,m.value]])]),e("button",{onClick:C,class:"btn add-btn"},"Add"),e("button",{onClick:y,class:"btn"},"Hide")])):b("",!0),e("div",Ye,[Ge,(n(!0),r(V,null,I(l.value,p=>(n(),r("div",{key:p,class:"link-item"},[z(x(p.title)+" ",1),e("span",{onClick:vt=>L(p.title),class:"del"},"x",8,Je),e("span",Ke,x(p.link),1)]))),128))])]),e("div",Pe,[e("button",{class:"btn bg-red",onClick:t[5]||(t[5]=p=>s.$emit("close",null))},"Cancel"),e("button",{class:"btn",onClick:i},"Update")])])]))}};var Re=D(Qe,[["__scopeId","data-v-37e2d00a"]]);const H=o=>(F("data-v-9384c5b8"),o=o(),N(),o),We={key:0,class:"content-center"},Xe={class:"header"},Ze=H(()=>e("div",{class:"message"},"Are You Sure?",-1)),et={class:"btn-group"},tt={class:"content-bottom"},at={class:"header"},ot={class:"list"},st=H(()=>e("div",{class:"list-item"},"Info",-1)),nt={__name:"ContextMenu",props:{share:Object},setup(o,{emit:h}){const u=d(!1);function v(a){a.target.className==="context-menu fixed"&&h("close")}function c(){u.value=!0}function _(){u.value=!1}return(a,l)=>(n(),r("div",{class:"context-menu fixed",onClick:v},[u.value?(n(),r("div",We,[e("div",Xe,x(o.share.title),1),Ze,e("div",et,[e("button",{onClick:_,class:"btn"},"Cancel"),e("button",{onClick:l[0]||(l[0]=f=>a.$emit("deleteShare",o.share)),class:"btn bg-red"},"Delete")])])):b("",!0),e("div",tt,[e("div",at,x(o.share.title),1),e("div",ot,[st,e("div",{onClick:l[1]||(l[1]=f=>a.$emit("updateShare",o.share)),class:"list-item"},"Update"),e("div",{onClick:c,class:"list-item red-text"},"Delete")])])]))}};var lt=D(nt,[["__scopeId","data-v-9384c5b8"]]);const it={class:"sharedata-component"},dt={__name:"index",setup(o){const h=Y(),u=d(!1),v=d(!1),c=d(!1),_=d([]),a=d({});B(()=>{l()});function l(){T.get("/api/v2/sharedata").then(i=>{console.log(i.data.shareDataFiles),_.value=i.data.shareDataFiles}).catch(i=>{console.log(i.response)})}function f(i){T.delete(`/api/v2/sharedata?search=id,${i.id}`).then(s=>{c.value=!1,l()}).catch(s=>{console.log(s.response)})}function m(){c.value=!1,v.value=!1,l()}function g(){u.value=!0}function S(i=null){i!==void 0&&i!==""&&i!==null&&_.value.unshift(i),u.value=!1}function w(){v.value=!1}function y(i){v.value=!0,c.value=!1,a.value=i}function C(i){h.isLogin&&(c.value=!0,a.value=i)}function L(){c.value=!1}return(i,s)=>(n(),r("div",it,[u.value?(n(),M(Ue,{key:0,onClose:S})):b("",!0),v.value?(n(),M(Re,{key:1,share:a.value,onUpdateShare:m,onClose:w},null,8,["share"])):b("",!0),c.value?(n(),M(lt,{key:2,share:a.value,onClose:L,onDeleteShare:f,onUpdateShare:y},null,8,["share"])):b("",!0),O(re,{shareDataList:_.value,onOpenContextMenu:C},null,8,["shareDataList"]),j(h).isLogin?(n(),M(P,{key:3,onOpenAddShareData:g})):b("",!0)]))}};var rt=D(dt,[["__scopeId","data-v-542599de"]]);const ut={class:"share-data"},ct={__name:"ShareData",setup(o){return(h,u)=>(n(),r("div",ut,[O(rt)]))}};var pt=D(ct,[["__scopeId","data-v-42b46fc5"]]);export{pt as default};
