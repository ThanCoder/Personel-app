import{u as b,j as t,q as y,o as i,c,s as N,t as v,k as m,a as e,l as f,v as _,f as U,d as g,m as V,x as C}from"./index.ed8267bb.js";const M={class:"login"},B=e("div",{class:"header"},"Login",-1),I=["onSubmit"],L={class:"form-group"},P={for:"username"},D=g("User Name "),T={key:0,class:"msg red"},j={class:"form-group"},q={for:"password"},z=g("Password "),E={key:0,class:"msg red"},R=e("div",{class:"btn-group"},[e("div",{class:"right"},[e("input",{type:"submit",value:"Login",class:"btn"})])],-1),G={__name:"login",setup(A){const h=b(),o=t(""),n=t(""),r=t(""),l=t(""),d=t(""),p=t(!1),w=y();function S(){o.value!=""&&(r.value="")}function x(){n.value!=""&&(l.value="")}function k(){if(o.value=="")return r.value="Set Username",!1;if(n.value=="")return l.value="Set Password",!1;V.post("/api/v2/user/login",{username:o.value,password:n.value}).then(s=>{p.value=!0,s.data.success&&(window.localStorage.setItem("user-token",s.data.token),w.push("/"),C.user.userSuccess((a,u)=>{a&&h.setLogin(!0)}))}).catch(s=>{s.response.data.error&&(d.value=s.response.data.error,p.value=!1),console.log(s.response)})}return(s,a)=>(i(),c("div",M,[B,d.value!==""?(i(),c("div",{key:0,class:N(p.value?"message":"message red")},v(d.value),3)):m("",!0),e("form",{onSubmit:U(k,["prevent"]),class:"c-form"},[e("div",L,[e("label",P,[D,r.value!=""?(i(),c("span",T,v(r.value),1)):m("",!0)]),f(e("input",{type:"text",class:"form-text",onInput:S,"onUpdate:modelValue":a[0]||(a[0]=u=>o.value=u),placeholder:"User Name",id:"username"},null,544),[[_,o.value]])]),e("div",j,[e("label",q,[z,l.value!=""?(i(),c("span",E,v(l.value),1)):m("",!0)]),f(e("input",{type:"password",onInput:x,"onUpdate:modelValue":a[1]||(a[1]=u=>n.value=u),class:"form-text",placeholder:"Password",id:"password"},null,544),[[_,n.value]])]),R],40,I)]))}};export{G as default};
